import{_ as p}from"./_plugin-vue_export-helper.cdc0426e.js";import{o as c,c as o,f as l,b as n,d as e,e as a,a as s,r as i}from"./app.f591c258.js";const u={},k=n("h1",{id:"c003-22\u5C4A0913\u602A",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#c003-22\u5C4A0913\u602A","aria-hidden":"true"},"#"),a(" C003.22\u5C4A0913\u602A")],-1),r=s(`<h2 id="_1-urlclasspath-java-631-638" tabindex="-1"><a class="header-anchor" href="#_1-urlclasspath-java-631-638" aria-hidden="true">#</a> 1.URLClassPath.java 631-638</h2><p>java/11.0.2-open 2019-01-18 16:22:01 /java.base/jdk/internal/loader/URLClassPath.java</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token class-name">Resource</span> <span class="token function">getResource</span><span class="token punctuation">(</span><span class="token keyword">final</span> <span class="token class-name">String</span> name<span class="token punctuation">,</span> <span class="token keyword">boolean</span> check<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">final</span> <span class="token class-name">URL</span> url<span class="token punctuation">;</span>
    <span class="token keyword">try</span> <span class="token punctuation">{</span>
        url <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">URL</span><span class="token punctuation">(</span>base<span class="token punctuation">,</span> <span class="token class-name">ParseUtil</span><span class="token punctuation">.</span><span class="token function">encodePath</span><span class="token punctuation">(</span>name<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">MalformedURLException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">IllegalArgumentException</span><span class="token punctuation">(</span><span class="token string">&quot;name&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// ....</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="\u5F02\u5E38\u7F3A\u5C11\u6709\u7528\u4FE1\u606F" tabindex="-1"><a class="header-anchor" href="#\u5F02\u5E38\u7F3A\u5C11\u6709\u7528\u4FE1\u606F" aria-hidden="true">#</a> \u5F02\u5E38\u7F3A\u5C11\u6709\u7528\u4FE1\u606F</h3><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>Caused by: java.lang.IllegalArgumentException: name
  at URLClassPath$Loader.findResource(URLClassPath.java:600) ~[na:na]
  at URLClassPath.findResource(URLClassPath.java:291) ~[na:na]
  at URLClassLoader$2.run(URLClassLoader.java:655) ~[na:na]
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u65E5\u5FD7\u4E2D\uFF0C\u53EF\u7531\u5806\u6808\u4FE1\u606F\u5B9A\u4F4D\u4EE3\u7801\uFF0C\u4F46\u65E0\u6CD5\u83B7\u53D6\u53C2\u6570<code>name</code>\u8FD0\u884C\u65F6\u7684\u503C\u3002 \u5E94\u8BE5\u4FEE\u6539\u5982\u4E0B\uFF0C\u6CE8\u610F<strong>\u6570\u636E\u8131\u654F</strong>\uFF0C\u5373\u5BF9\u654F\u611F\u4FE1\u606F\u8FDB\u884C\u66FF\u6362\uFF0C\u52A0\u5BC6\u7B49\u3002</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">IllegalArgumentException</span><span class="token punctuation">(</span><span class="token string">&quot;name=&quot;</span> <span class="token operator">+</span> name<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h2 id="_2-balanceaccountsserviceimpl-java-107-118" tabindex="-1"><a class="header-anchor" href="#_2-balanceaccountsserviceimpl-java-107-118" aria-hidden="true">#</a> 2.BalanceAccountsServiceImpl.java 107-118</h2><p>express-home 92ee7d223aca4c8d9dba281e121a3fc659d97dd1</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token class-name">SimpleResult</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Map</span><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">&gt;</span><span class="token punctuation">&gt;</span></span> result <span class="token operator">=</span> <span class="token class-name">SimpleResult</span><span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// ... ...</span>
<span class="token comment">// \u5224\u65AD\u5BA2\u6237\u7C7B\u578B</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>userTypeEnum <span class="token operator">==</span> <span class="token class-name">UserTypeEnum</span><span class="token punctuation">.</span>PROXY_75<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    result<span class="token punctuation">.</span><span class="token function">setSuccess</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    result<span class="token punctuation">.</span><span class="token function">setMessage</span><span class="token punctuation">(</span><span class="token string">&quot;\u5BF9\u4E8E75\u6298\u7528\u6237,\u6211\u4EEC\u4F7F\u7528\u6BCF\u6708\u8D26\u5355\u7ED3\u7B97!&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> result<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="may-the-false-be-with-you" tabindex="-1"><a class="header-anchor" href="#may-the-false-be-with-you" aria-hidden="true">#</a> May The false be with you</h3><ul><li>Result\u9ED8\u8BA4\u4E3A\u5931\u8D25\uFF0C\u4EE5<code>false</code>\u6216<code>failure</code>\u521D\u59CB\u5316</li><li>\u903B\u8F91check\u4E2D\uFF0C\u76F4\u63A5\u8BBE\u7F6E\u6D88\u606F\u5E76return</li><li>\u4E1A\u52A1\u6700\u540E\u6210\u529F\u65F6\uFF0C\u8BBE\u5B9Asuccess\u53CA\u7ED3\u679C</li></ul><h3 id="\u6D88\u606F\u6587\u5B57\u7684\u7B49\u5BBD\u6027" tabindex="-1"><a class="header-anchor" href="#\u6D88\u606F\u6587\u5B57\u7684\u7B49\u5BBD\u6027" aria-hidden="true">#</a> \u6D88\u606F\u6587\u5B57\u7684\u7B49\u5BBD\u6027</h3><ul><li>\u6B64\u5904\u672A\u505AI18n\u5904\u7406\uFF0C\u786C\u7F16\u7801\u6D88\u606F\u3002</li><li>\u4E2D\u6587\u5185\u5E94\u8BE5\u4F7F\u7528\u4E2D\u6587\u6807\u70B9</li></ul><h2 id="_3-stringtemplate-java-106-118" tabindex="-1"><a class="header-anchor" href="#_3-stringtemplate-java-106-118" aria-hidden="true">#</a> 3.StringTemplate.java 106-118</h2><p>mirana c30e3f2c0e3bf61f38f05b56b4f341113b1cd61c</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">// arg = ThreadLocal.withInitial(P::new);</span>
<span class="token annotation punctuation">@NotNull</span>
<span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">final</span> <span class="token class-name">P</span> p <span class="token operator">=</span> arg<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">try</span> <span class="token punctuation">{</span>
        p<span class="token punctuation">.</span><span class="token function">solid</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">C</span> c <span class="token operator">=</span> cac<span class="token punctuation">.</span><span class="token function">computeIfAbsent</span><span class="token punctuation">(</span>p<span class="token punctuation">,</span> k <span class="token operator">-&gt;</span> <span class="token keyword">new</span> <span class="token class-name">C</span><span class="token punctuation">(</span>k<span class="token punctuation">,</span> txt<span class="token punctuation">,</span> fix<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> c<span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span>p<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">finally</span> <span class="token punctuation">{</span>
        arg<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        p<span class="token punctuation">.</span><span class="token function">clear</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="\u4E0D\u7528\u642D\u7279\u6B8A\u65B9\u6CD5\u7684\u4FBF\u8F66" tabindex="-1"><a class="header-anchor" href="#\u4E0D\u7528\u642D\u7279\u6B8A\u65B9\u6CD5\u7684\u4FBF\u8F66" aria-hidden="true">#</a> \u4E0D\u7528\u642D\u7279\u6B8A\u65B9\u6CD5\u7684\u4FBF\u8F66</h3><p><code>toString</code>\u65B9\u6CD5\uFF0C\u5728IDE\u7684debug\uFF0C\u65E5\u5FD7\u4E2D\uFF0C\u4F1A\u88AB\u9690\u5F0F\u8C03\u7528\u3002 \u975E\u5E42\u7B49\u7684\uFF0C\u6709\u5916\u90E8\u4F5C\u7528\u7684\u65B9\u6CD5\uFF0C\u642D\u4FBF\u8F66\u4F1A\u5B58\u5728\u9690\u85CF\u95EE\u9898\u3002</p><h3 id="threadlocal\u7684\u5185\u5B58\u6CC4\u9732" tabindex="-1"><a class="header-anchor" href="#threadlocal\u7684\u5185\u5B58\u6CC4\u9732" aria-hidden="true">#</a> ThreadLocal\u7684\u5185\u5B58\u6CC4\u9732</h3><p><code>arg</code>\u662F<code>ThreadLocal</code>\u5B9E\u4F8B\uFF0C\u8981\u6CE8\u610F\u5185\u5B58\u6CC4\u9732\u60C5\u5F62</p><ul><li>\u2460ThreadLocal\u5F15\u7528\u5B58\u6D3B\u8F83\u77ED\uFF0C\u975Estatic\u7684\uFF0C\u6BCF\u6B21new\u7684</li><li>\u2461\u7EBF\u7A0B<code>Thread</code>\u5B58\u6D3B\u8F83\u957F\uFF0C\u5982\u7EBF\u7A0B\u6C60\u4E2D\uFF0C\u6C38\u6D3B\u7EBF\u7A0B\u7B49</li></ul><p>\u4EE5\u4E0A\u540C\u65F6\u6EE1\u8DB3\uFF0C\u4F1A\u6709\u2460\u7684\u5F15\u7528\u88AB\u56DE\u6536\uFF0C\u4F46\u2461\u5185ThreadLocalMap.Entry.value\u4E0D\u56DE\u6536\uFF0C\u53D1\u751F\u6CC4\u9732\u3002</p><p>\u4E0D\u540C\u65F6\u6EE1\u8DB3\u2460\u2461\uFF0C\u6216\u8005\u4E3B\u52A8\u91CA\u653E, \u5982try-close\u6A21\u5F0F\uFF0C\u90FD\u53EF\u4EE5\u907F\u514D\u6CC4\u9732\u3002 \u6CE8\u610F\uFF0CSoftReference\u4F5C\u4E3Avalue\uFF0C\u53EA\u662F\u4EE5\u5C0F\u5BF9\u8C61\u66FF\u6362\u5927\u5BF9\u8C61\uFF0C\u5EF6\u7F13\u6CC4\u9732\u3002</p><h3 id="threadlocal\u7684\u65B9\u6CD5\u6CC4\u9732" tabindex="-1"><a class="header-anchor" href="#threadlocal\u7684\u65B9\u6CD5\u6CC4\u9732" aria-hidden="true">#</a> ThreadLocal\u7684\u65B9\u6CD5\u6CC4\u9732</h3><p>ThreadLocal\u591A\u7528\u4F5CContext\u4F7F\u7528\uFF0C\u8DE8\u65B9\u6CD5\uFF0C\u8DE8\u5C42\u4F20\u9012\u4FE1\u606F\u3002 \u4FD7\u79F0\u65B9\u6CD5\u6CC4\u9732\uFF0C\u5373\u9664\u4E86input\uFF0Creturn\uFF0Cthrow\u5916\uFF0C \u8FD8\u6709\u5176\u4ED6\u6570\u636E\u901A\u8DEF\uFF0C\u4F7F\u5F97\u65B9\u6CD5\u7684\u6570\u636E\u6D41\u53D8\u5F97\u9690\u5F62\u548C\u590D\u6742\u3002</p><h3 id="threadlocal\u7684\u7EBF\u7A0B\u5207\u6362" tabindex="-1"><a class="header-anchor" href="#threadlocal\u7684\u7EBF\u7A0B\u5207\u6362" aria-hidden="true">#</a> ThreadLocal\u7684\u7EBF\u7A0B\u5207\u6362</h3><p>ThreadLocal\u662F\u5426\u80FD\u6B63\u5E38\u5DE5\u4F5C\uFF0C\u4F9D\u8D56\u4E8E\u4E1A\u52A1\u7684\u7EBF\u7A0B\u6A21\u578B\uFF0C\u8DE8\u7EBF\u7A0B\u65F6\u4F1A\u4E22\u5931\u4E0A\u4E0B\u6587\u3002 \u7B80\u5355\u7684\u7EBF\u7A0B\u6C60\uFF0C\u63A8\u8350\u4F7F\u7528\u963F\u91CC\u7684TransmittableThreadLocal\u7CFB\u5217\u3002</p><h2 id="_4-metricaspect-java-23-24" tabindex="-1"><a class="header-anchor" href="#_4-metricaspect-java-23-24" aria-hidden="true">#</a> 4.MetricAspect.java 23-24</h2><p>fba_backend_v3 790e38947bdc5200536172ad1c2f638a11152803</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Around</span><span class="token punctuation">(</span><span class="token string">&quot;@annotation(metricTime)&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token class-name">Object</span> <span class="token function">metric</span><span class="token punctuation">(</span><span class="token class-name">ProceedingJoinPoint</span> joinPoint<span class="token punctuation">,</span> <span class="token class-name">MetricTime</span> metricTime<span class="token punctuation">)</span> <span class="token punctuation">{</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="spring-aop-\u548C-full-aspectj" tabindex="-1"><a class="header-anchor" href="#spring-aop-\u548C-full-aspectj" aria-hidden="true">#</a> Spring AOP \u548C Full AspectJ</h3><p><code>@annotation</code>\u4E3A<code>in-place</code>\u7684<code>pointcut</code>\u8BED\u6CD5\uFF0C\u6B64\u5904\u67092\u79CD\u5199\u6CD5\uFF0C</p><ul><li>\u5168\u7C7B\u540D - @Around(&quot;@annotation(com.xxx.xxx.annotation.MetricTime)&quot;)</li><li>\u53C2\u6570\u81EA\u52A8 - @Around(&quot;@annotation(metricTime)&quot;)</li><li>\u53C2\u6570\u624B\u52A8 - @Around(value = &quot;@annotation(metricTime)&quot;, argNames = &quot;joinPoint,metricTime&quot;)</li></ul><p>\u5F53Advice\u4E2D\u4E0D\u9700\u8981annotation\u53C2\u6570\u65F6\uFF0C\u53EF\u76F4\u63A5\u4F7F\u7528\u5168\u7C7B\u540D\u5F62\u5F0F\u3002</p>`,35),d=a("\u8BE6\u7EC6\u8D44\u6599: "),v={href:"https://docs.spring.io/spring-framework/docs/current/reference/html/core.html#aop",target:"_blank",rel:"noopener noreferrer"},m=a("https://docs.spring.io/spring-framework/docs/current/reference/html/core.html#aop"),h=s(`<h2 id="_5-addresscache-java-46-54" tabindex="-1"><a class="header-anchor" href="#_5-addresscache-java-46-54" aria-hidden="true">#</a> 5.AddressCache.java 46-54</h2><p>fba_backend_v3 790e38947bdc5200536172ad1c2f638a11152803</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Cacheable</span><span class="token punctuation">(</span>cacheNames <span class="token operator">=</span> <span class="token class-name">WingsCache<span class="token punctuation">.</span>Level<span class="token punctuation">.</span>Forever</span> <span class="token operator">+</span> <span class="token string">&quot;Address&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token class-name">PageResult</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">AddressVo</span><span class="token punctuation">&gt;</span></span> <span class="token function">findAddrPage</span><span class="token punctuation">(</span><span class="token class-name">AddressRequest</span> request<span class="token punctuation">,</span> <span class="token class-name">Long</span> userId<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">&quot;find address of user {} from db&quot;</span><span class="token punctuation">,</span> userId<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">FbaAddressTable</span> at <span class="token operator">=</span> fbaAddressDao<span class="token punctuation">.</span><span class="token function">getAlias</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">FbaReceiverBookTable</span> bt <span class="token operator">=</span> fbaReceiverBookDao<span class="token punctuation">.</span><span class="token function">getAlias</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    val select <span class="token operator">=</span> fbaAddressDao
            <span class="token punctuation">.</span><span class="token function">ctx</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">selectFrom</span><span class="token punctuation">(</span>bt<span class="token punctuation">.</span><span class="token function">leftJoin</span><span class="token punctuation">(</span>at<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token class-name"><span class="token namespace">bt<span class="token punctuation">.</span></span>AddressId</span><span class="token punctuation">.</span><span class="token function">eq</span><span class="token punctuation">(</span><span class="token class-name"><span class="token namespace">at<span class="token punctuation">.</span></span>Id</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">where</span><span class="token punctuation">(</span>bt<span class="token punctuation">.</span>onlyLiveData<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">PageQuery</span> pageQuery <span class="token operator">=</span> request<span class="token punctuation">.</span><span class="token function">getPageQuery</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="\u7F13\u5B58\u53EF\u80FD\u7206\u6808" tabindex="-1"><a class="header-anchor" href="#\u7F13\u5B58\u53EF\u80FD\u7206\u6808" aria-hidden="true">#</a> \u7F13\u5B58\u53EF\u80FD\u7206\u6808</h3><p>\u4ECE\u4E1A\u52A1\u903B\u8F91\u63A8\u65AD\uFF0C\u6B64\u5904Cacheable\u53EF\u80FD\u4F1A\u6EA2\u51FA\u3002</p><ul><li>Forever\u9ED8\u8BA4\u4E3A\u65E0\u754C\uFF0C\u65E0\u8FC7\u671F\u7F13\u5B58</li><li>\u7F13\u5B58Key\u7684\u7EC4\u5408\u8FC7\u591A</li><li>\u7528\u6237\u6709\u5173\u7684\u7F13\u5B58\uFF0C\u4E0D\u5E94\u8BE5\u8D85\u8FC7session\u751F\u547D\u5468\u671F</li></ul><p>\u975E\u4E1A\u52A1\u74F6\u9888\u4E0D\u8981\u8D38\u7136\u589E\u52A0\u7F13\u5B58\uFF0C\u7F13\u5B58\u8BBE\u7F6E\u4E00\u5B9A\u8981\u57FA\u4E8E\u5B9E\u6218\u6307\u6807\u3002</p><h3 id="\u907F\u514Dselect" tabindex="-1"><a class="header-anchor" href="#\u907F\u514Dselect" aria-hidden="true">#</a> \u907F\u514D<code>select *</code></h3><p>wings\u4E2D\u5F15\u5165jooq\uFF0C\u5176\u76EE\u7684\u4E4B\u4E00\uFF0C\u5C31\u662F\u8981\u6309\u9700\u67E5\u8BE2\uFF0C\u907F\u514D\u5077\u61D2\u7684<code>select *</code></p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token punctuation">.</span><span class="token function">select</span><span class="token punctuation">(</span>at<span class="token punctuation">.</span><span class="token function">asterisk</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token class-name"><span class="token namespace">bt<span class="token punctuation">.</span></span>UserId</span><span class="token punctuation">,</span> <span class="token class-name"><span class="token namespace">bt<span class="token punctuation">.</span></span>AddressId</span><span class="token punctuation">,</span> <span class="token class-name"><span class="token namespace">bt<span class="token punctuation">.</span></span>Code</span><span class="token punctuation">)</span>
<span class="token punctuation">.</span><span class="token function">from</span><span class="token punctuation">(</span>bt<span class="token punctuation">.</span><span class="token function">leftJoin</span><span class="token punctuation">(</span>at<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token class-name"><span class="token namespace">bt<span class="token punctuation">.</span></span>AddressId</span><span class="token punctuation">.</span><span class="token function">eq</span><span class="token punctuation">(</span><span class="token class-name"><span class="token namespace">at<span class="token punctuation">.</span></span>Id</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">.</span><span class="token function">where</span><span class="token punctuation">(</span>bt<span class="token punctuation">.</span>onlyLiveData<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_6-basicsoffercache-java-39-40" tabindex="-1"><a class="header-anchor" href="#_6-basicsoffercache-java-39-40" aria-hidden="true">#</a> 6.BasicsOfferCache.java 39-40</h2><p>fba_backend_v3 790e38947bdc5200536172ad1c2f638a11152803</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code>log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span><span class="token string">&quot;\u83B7\u53D6\u62A5\u4EF7\u7F13\u5B58\u3010%s,%s,%s,%s\u3011&quot;</span><span class="token punctuation">,</span> warehouse<span class="token punctuation">,</span> feeType<span class="token punctuation">,</span> apply<span class="token punctuation">,</span> applyId<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// \u4E0D\u77E5\u54EA\u4E2A\u5E08\u5085\u6559\u7684</span>
log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span><span class="token string">&quot;Received response for %s %s in %.1fms%n%s&quot;</span><span class="token punctuation">,</span>
        response<span class="token punctuation">.</span><span class="token function">request</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">url</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> response<span class="token punctuation">.</span><span class="token function">code</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">(</span>t2 <span class="token operator">-</span> t1<span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">1e6d</span><span class="token punctuation">,</span> response<span class="token punctuation">.</span><span class="token function">headers</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="log\u7684\u6027\u80FD\u53CA\u53EF\u91C7\u96C6\u6027" tabindex="-1"><a class="header-anchor" href="#log\u7684\u6027\u80FD\u53CA\u53EF\u91C7\u96C6\u6027" aria-hidden="true">#</a> log\u7684\u6027\u80FD\u53CA\u53EF\u91C7\u96C6\u6027</h3><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code>log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">&quot;\u83B7\u53D6\u62A5\u4EF7\u7F13\u5B58\u3010{},{},{},{}\u3011&quot;</span><span class="token punctuation">,</span> warehouse<span class="token punctuation">,</span> feeType<span class="token punctuation">,</span> apply<span class="token punctuation">,</span> applyId<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>\u65E5\u5FD7\u6027\u80FD\uFF0C\u5F80\u5F80\u6210\u4E3A\u4E1A\u52A1\u74F6\u9888\u4E4B\u4E00\uFF0C\u6B64\u5916\uFF0C\u65E5\u5FD7\u5E94\u8BE5\u5177\u5907\u53EF\u91C7\u96C6\u6027\uFF0C\u4E0D\u8981\u4F7F\u7528\u4E2D\u6587\u4F5C\u4E3A\u7279\u5F81\u503C\u3002</p><h3 id="\u4E0D\u77E5\u54EA\u4E2A\u5E08\u5085\u6559\u7684" tabindex="-1"><a class="header-anchor" href="#\u4E0D\u77E5\u54EA\u4E2A\u5E08\u5085\u6559\u7684" aria-hidden="true">#</a> \u4E0D\u77E5\u54EA\u4E2A\u5E08\u5085\u6559\u7684</h3><ul><li>\u4ECE\u6765\u4E0D\u5141\u8BB8<code>1e6d</code>\u7684\u5199\u6CD5\uFF0C\u4F7F\u7528\u666E\u901A\u4EBA\u80FD\u61C2\u7684 <code>1_000_000D</code>\uFF0C\u4E14<code>d</code>\u8981\u5927\u5199</li><li>\u65F6\u95F4\u8F6C\u6362\uFF0C\u7528TimeUnit.NANOSECONDS.toMillis(t2 - t1)</li></ul>`,18),b=a("\u4E8B\u540E\u5F97\u77E5\uFF0C\u662F"),f={href:"https://square.github.io/okhttp/features/interceptors/",target:"_blank",rel:"noopener noreferrer"},g=a("okhttp\u5B98\u65B9\u793A\u4F8B"),y=a("\uFF0C\u6211\u5192\u72AF\u4E86\u3002"),j=s(`<h2 id="_7-financeaccountcache-java-30-34" tabindex="-1"><a class="header-anchor" href="#_7-financeaccountcache-java-30-34" aria-hidden="true">#</a> 7.FinanceAccountCache.java 30-34</h2><p>fba_backend_v3 dfe83f2c8a02f45bdec841b25d8acbb846d61bb5</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Cacheable</span>
<span class="token keyword">public</span> <span class="token class-name">Long</span> <span class="token function">findByUserId</span><span class="token punctuation">(</span><span class="token class-name">Long</span> userId<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">final</span> <span class="token class-name">FbaFinanceAccount</span> fbaFinanceAccount <span class="token operator">=</span> fbaFinanceAccountDao<span class="token punctuation">.</span><span class="token function">fetchOne</span><span class="token punctuation">(</span>
                table <span class="token operator">-&gt;</span> <span class="token class-name"><span class="token namespace">table<span class="token punctuation">.</span></span>Currency</span><span class="token punctuation">.</span><span class="token function">eq</span><span class="token punctuation">(</span><span class="token class-name">Currency</span><span class="token punctuation">.</span>USD<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">and</span><span class="token punctuation">(</span><span class="token class-name"><span class="token namespace">table<span class="token punctuation">.</span></span>UserId</span><span class="token punctuation">.</span><span class="token function">eq</span><span class="token punctuation">(</span>userId<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> fbaFinanceAccount <span class="token operator">==</span> <span class="token keyword">null</span> <span class="token operator">?</span> <span class="token class-name">EmptyValue</span><span class="token punctuation">.</span>BIGINT <span class="token operator">:</span> fbaFinanceAccount<span class="token punctuation">.</span><span class="token function">getId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="jooq\u8BEF\u7528\u53CAselect" tabindex="-1"><a class="header-anchor" href="#jooq\u8BEF\u7528\u53CAselect" aria-hidden="true">#</a> jooq\u8BEF\u7528\u53CA<code>select *</code></h3><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">// \u65B9\u5F0F\u4E00\uFF0C\u4F7F\u7528SelectOrderCondition\u5305\u88C5</span>
<span class="token keyword">final</span> <span class="token class-name">FbaFinanceAccount</span> fbaFinanceAccount <span class="token operator">=</span> fbaFinanceAccountDao<span class="token punctuation">.</span><span class="token function">fetchOne</span><span class="token punctuation">(</span>t <span class="token operator">-&gt;</span>
        <span class="token class-name">SelectOrderCondition</span><span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span><span class="token class-name"><span class="token namespace">t<span class="token punctuation">.</span></span>Currency</span><span class="token punctuation">.</span><span class="token function">eq</span><span class="token punctuation">(</span><span class="token class-name">Currency</span><span class="token punctuation">.</span>USD<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">and</span><span class="token punctuation">(</span><span class="token class-name"><span class="token namespace">t<span class="token punctuation">.</span></span>UserId</span><span class="token punctuation">.</span><span class="token function">eq</span><span class="token punctuation">(</span>userId<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token class-name"><span class="token namespace">t<span class="token punctuation">.</span></span>Id</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">return</span> fbaFinanceAccount <span class="token operator">==</span> <span class="token keyword">null</span> <span class="token operator">?</span> <span class="token class-name">EmptyValue</span><span class="token punctuation">.</span>BIGINT <span class="token operator">:</span> fbaFinanceAccount<span class="token punctuation">.</span><span class="token function">getId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// \u65B9\u5F0F\u4E8C\uFF0C\u4F7F\u7528Dsl\uFF0C\u53EF\u4EE5\u81EA\u5B9A\u4E49\u8868\u6216\u522B\u540D</span>
<span class="token keyword">final</span> <span class="token class-name">FbaFinanceAccountTable</span> t <span class="token operator">=</span> fbaFinanceAccountDao<span class="token punctuation">.</span><span class="token function">getTable</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">final</span> <span class="token class-name">Long</span> id <span class="token operator">=</span> fbaFinanceAccountDao<span class="token punctuation">.</span><span class="token function">fetchOne</span><span class="token punctuation">(</span><span class="token class-name">Long</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> t<span class="token punctuation">,</span>
        <span class="token class-name"><span class="token namespace">t<span class="token punctuation">.</span></span>Currency</span><span class="token punctuation">.</span><span class="token function">eq</span><span class="token punctuation">(</span><span class="token class-name">Currency</span><span class="token punctuation">.</span>USD<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">and</span><span class="token punctuation">(</span><span class="token class-name"><span class="token namespace">t<span class="token punctuation">.</span></span>UserId</span><span class="token punctuation">.</span><span class="token function">eq</span><span class="token punctuation">(</span>userId<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token class-name"><span class="token namespace">t<span class="token punctuation">.</span></span>Id</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">return</span> id <span class="token operator">==</span> <span class="token keyword">null</span> <span class="token operator">?</span> <span class="token class-name">EmptyValue</span><span class="token punctuation">.</span>BIGINT <span class="token operator">:</span> id<span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_8-orderusserviceimpl-java-476-483" tabindex="-1"><a class="header-anchor" href="#_8-orderusserviceimpl-java-476-483" aria-hidden="true">#</a> 8.OrderUsServiceImpl.java 476-483</h2><p>express-home 938f45937c1a55d9ae9e203a840b8181de9e4b1e</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token class-name">BigDecimal</span> waitPayFee <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">BigDecimal</span><span class="token punctuation">(</span><span class="token number">0.0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

waitPayFee <span class="token operator">=</span> <span class="token class-name">DecimalUtil</span><span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>waitPayFee<span class="token punctuation">,</span> orderMainPo<span class="token punctuation">.</span><span class="token function">getCashFreight</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
waitPayFee <span class="token operator">=</span> <span class="token class-name">DecimalUtil</span><span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>waitPayFee<span class="token punctuation">,</span> orderMainPo<span class="token punctuation">.</span><span class="token function">getCashSurcharge</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">if</span> <span class="token punctuation">(</span>orderMainPo<span class="token punctuation">.</span><span class="token function">getCountry</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span><span class="token class-name">CountryEnum</span><span class="token punctuation">.</span><span class="token function">fromCode</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    waitPayFee <span class="token operator">=</span> orderMainPo<span class="token punctuation">.</span><span class="token function">getCashDeerFee</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="\u7528\u5FC3\u60F3\u95EE\u9898-\u7528\u8111\u5199\u4EE3\u7801" tabindex="-1"><a class="header-anchor" href="#\u7528\u5FC3\u60F3\u95EE\u9898-\u7528\u8111\u5199\u4EE3\u7801" aria-hidden="true">#</a> \u7528\u5FC3\u60F3\u95EE\u9898\uFF0C\u7528\u8111\u5199\u4EE3\u7801</h3><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token class-name">BigDecimal</span> waitPayFee<span class="token punctuation">;</span>

<span class="token keyword">if</span> <span class="token punctuation">(</span>orderMainPo<span class="token punctuation">.</span><span class="token function">getCountry</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">equalsIgnoreCase</span><span class="token punctuation">(</span><span class="token class-name">CountryEnum</span><span class="token punctuation">.</span>US<span class="token punctuation">.</span><span class="token function">name</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    waitPayFee <span class="token operator">=</span> <span class="token class-name">Z</span><span class="token punctuation">.</span><span class="token function">notNullSafe</span><span class="token punctuation">(</span>ZERO<span class="token punctuation">,</span> orderMainPo<span class="token punctuation">.</span><span class="token function">getCashDeerFee</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
    waitPayFee <span class="token operator">=</span> <span class="token class-name">DecimalUtil</span><span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>orderMainPo<span class="token punctuation">.</span><span class="token function">getCashFreight</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> orderMainPo<span class="token punctuation">.</span><span class="token function">getCashSurcharge</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>BigDecimal\u7EDD\u5BF9\u4E0D\u53EF\u7528\u6D6E\u70B9\u578B\u6784\u9020\uFF0C<code>ZERO</code>\u662F\u5E38\u7528\u521D\u59CB\u503C</li><li>\u6BEB\u65E0\u610F\u4E49\u7684\u8D4B\u503C\uFF0C\u4E00\u4E2A<code>if</code>\u5168\u767D\u778E</li><li>Enum\u5C31\u662F\u8981\u76F4\u63A5\u7528\uFF0C\u4E0D\u8981\u4F7F\u7528fromCode(1)</li><li>\u82E5 waitPayFee \u65E0\u540E\u7EED\u8986\u76D6\uFF0C\u9700\u8981final</li></ul><h2 id="_9-balanceactsdetailcontroller-java-208-234" tabindex="-1"><a class="header-anchor" href="#_9-balanceactsdetailcontroller-java-208-234" aria-hidden="true">#</a> 9.BalanceActsDetailController.java 208-234</h2><p>express-home 938f45937c1a55d9ae9e203a840b8181de9e4b1e</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">BaggagePo</span><span class="token punctuation">&gt;</span></span> pos <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">int</span> j <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token keyword">int</span> k <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>

<span class="token class-name">FedexBillsPo</span> fedexBillsPoT<span class="token punctuation">;</span>
<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">BaggagePo</span> po <span class="token operator">:</span> baggagePos<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>po<span class="token punctuation">.</span><span class="token function">getIsDeleted</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">continue</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token class-name">FedexBillsPo</span> fedexBillsPo <span class="token operator">=</span> fedexBillsService<span class="token punctuation">.</span><span class="token function">getByTrackNum</span><span class="token punctuation">(</span>po<span class="token punctuation">.</span><span class="token function">getTrackNumUs</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// ... ...</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>po<span class="token punctuation">.</span><span class="token function">getStatus</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token class-name">OrderStatusEnum</span><span class="token punctuation">.</span>USUS_PICK<span class="token punctuation">.</span><span class="token function">code</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        pos<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>k<span class="token punctuation">,</span> po<span class="token punctuation">)</span><span class="token punctuation">;</span>
        k<span class="token operator">++</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>po<span class="token punctuation">.</span><span class="token function">getStatus</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">!=</span> <span class="token class-name">OrderStatusEnum</span><span class="token punctuation">.</span>USUS_PICK<span class="token punctuation">.</span><span class="token function">code</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span>
        po<span class="token punctuation">.</span><span class="token function">getStatus</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token class-name">OrderStatusEnum</span><span class="token punctuation">.</span>USUS_CHECK<span class="token punctuation">.</span><span class="token function">code</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">||</span> 
        po<span class="token punctuation">.</span><span class="token function">getStatus</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token class-name">OrderStatusEnum</span><span class="token punctuation">.</span>USUS_BILLED<span class="token punctuation">.</span><span class="token function">code</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">||</span>
        po<span class="token punctuation">.</span><span class="token function">getStatus</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token class-name">OrderStatusEnum</span><span class="token punctuation">.</span>USUS_COMPLETED<span class="token punctuation">.</span><span class="token function">code</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        weight<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>j<span class="token punctuation">,</span> po<span class="token punctuation">.</span><span class="token function">getWeightRaw</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        j<span class="token operator">++</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// ... ...</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="controller\u4E0D\u8981\u5199\u4E1A\u52A1\u903B\u8F91" tabindex="-1"><a class="header-anchor" href="#controller\u4E0D\u8981\u5199\u4E1A\u52A1\u903B\u8F91" aria-hidden="true">#</a> Controller\u4E0D\u8981\u5199\u4E1A\u52A1\u903B\u8F91</h3><p>\u6B64Controller\u6709300\u884C\u4E1A\u52A1\u4EE3\u7801\uFF0C\u6D89\u53CA\u6570\u636E\u5E93\u64CD\u4F5C\uFF0C\u4E0A\u8FF0\u4EC5\u662F\u6570\u636E\u8F6C\u6362\u7684\u4E00\u6BB5\u3002</p><ul><li>\u4E1A\u52A1\u4EE3\u7801 - \u5E94\u8BE5\u5728Service\u5C42</li><li>Mvc\u7684C\u5C42 - \u5E94\u8BE5\u4EC5\u505A\u6570\u636E\u68C0\u67E5\uFF0C\u8F6C\u6362\uFF0C\u4EE5\u5B8C\u6210Service\u8C03\u5EA6</li></ul><h3 id="\u4E0D\u8981\u5728\u5FAA\u73AF\u4E2D\u67E5\u6570\u636E\u5E93" tabindex="-1"><a class="header-anchor" href="#\u4E0D\u8981\u5728\u5FAA\u73AF\u4E2D\u67E5\u6570\u636E\u5E93" aria-hidden="true">#</a> \u4E0D\u8981\u5728\u5FAA\u73AF\u4E2D\u67E5\u6570\u636E\u5E93</h3><p>\u5728\u5FAA\u73AF\u4E2D\u8C03\u7528\u4E2D\u8D44\u6E90\uFF0C\u662F\u975E\u5E38\u4E0D\u597D\u7684\u601D\u7EF4\u4E60\u60EF\uFF0C\u5BB9\u6613\u5B58\u5728<code>N+1</code>\u95EE\u9898\u3002</p><ul><li>\u5982\u6709<code>N(1)</code>\u7F13\u5B58\uFF0C\u4EE5\u51CF\u5C11\u4EE3\u7801\u590D\u6742\u5EA6\u7684\u4E3A\u76EE\u7684\uFF0C\u53EF\u4EE5\u5FAA\u73AF\u8C03\u7528\u3002</li><li>\u6570\u636E\u91CF\u4E0D\u5927\u65F6\uFF0C\u5E94\u8BE5\u5728\u5916\u5C42\u4E00\u6B21\u6027\u83B7\u53D6</li><li>\u6570\u636E\u91CF\u5F88\u5927\u65F6\uFF0C\u5E94\u8BE5\u6309\u9875\u5904\u7406\uFF0C\u5728\u5916\u5C42\u6309\u9875\u5904\u7406\u3002</li></ul><h3 id="\u8981\u7406\u89E3\u6570\u636E\u7ED3\u6784\u7684\u7279\u6027" tabindex="-1"><a class="header-anchor" href="#\u8981\u7406\u89E3\u6570\u636E\u7ED3\u6784\u7684\u7279\u6027" aria-hidden="true">#</a> \u8981\u7406\u89E3\u6570\u636E\u7ED3\u6784\u7684\u7279\u6027</h3><p>List\u53CAArrayList\u662F\u6700\u5E38\u7528\u7C7B\u578B\uFF0C\u540E\u8005\u5177\u5907RandomAccess\u7279\u6027</p><ul><li>\u79FB\u9664\u8BA1\u6570\u5668j\u548Ck\uFF0C\u76F4\u63A5\u4F7F\u7528add()</li><li>\u6700\u540E\u7684\u8BA1\u6570\uFF0C\u4F7F\u7528 size()\u65B9\u6CD5</li></ul><h3 id="\u8981\u6709\u903B\u8F91\u5224\u65AD\u53CA\u53D8\u91CF\u63D0\u53D6\u601D\u60F3" tabindex="-1"><a class="header-anchor" href="#\u8981\u6709\u903B\u8F91\u5224\u65AD\u53CA\u53D8\u91CF\u63D0\u53D6\u601D\u60F3" aria-hidden="true">#</a> \u8981\u6709\u903B\u8F91\u5224\u65AD\u53CA\u53D8\u91CF\u63D0\u53D6\u601D\u60F3</h3><ul><li>\u672C\u8EAB\u4E1A\u52A1\u8BED\u4E49\u5F88\u6E05\u6670\uFF0C\u4F46\u4E24\u4E2A<code>if</code>\u5199\u7684\u4E00\u584C\u7CCA\u6D82\u3002</li><li><code>po.getStatus()</code>\u5E94\u8BE5\u63D0\u53D6\u4E3Afinal\u53D8\u91CF\uFF0C\u4FDD\u6301\u4E0D\u53D8\u6027\u548C\u7B80\u6D01</li></ul>`,25);function w(x,_){const t=i("ExternalLinkIcon");return c(),o("div",null,[k,l(" markdownlint-disable MD013 "),r,n("p",null,[d,n("a",v,[m,e(t)])]),h,n("p",null,[b,n("a",f,[g,e(t)]),y]),j])}const P=p(u,[["render",w],["__file","c003.html.vue"]]);export{P as default};
